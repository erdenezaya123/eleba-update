{"remainingRequest":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\src\\views\\Orders.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\src\\views\\Orders.vue","mtime":1725332322499},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJZXhwb3J0IGRlZmF1bHR7DQoJCW5hbWU6J09yZGVycycsDQoJCWRhdGEoKXsNCgkJCXJldHVybiB7DQoJCQkJYnVzaW5lc3NJZDp0aGlzLiRyb3V0ZS5xdWVyeS5idXNpbmVzc0lkLA0KCQkJCWJ1c2luZXNzOnt9LA0KCQkJCXVzZXI6e30sDQoJCQkJY2FydEFycjpbXSwNCgkJCQlkZWxpdmVyeWFkZHJlc3M6e30NCgkJCX0NCgkJfSwNCgkJY3JlYXRlZCgpIHsNCgkJCXRoaXMudXNlciA9IHRoaXMuJGdldFNlc3Npb25TdG9yYWdlKCd1c2VyJyk7DQoJCQl0aGlzLmRlbGl2ZXJ5YWRkcmVzcyA9IHRoaXMuJGdldExvY2FsU3RvcmFnZSh0aGlzLnVzZXIudXNlcklkKTsNCgkJCQ0KCQkJLy/mn6Xor6LlvZPliY3llYblrrYNCgkJCXRoaXMuJGF4aW9zLnBvc3QoJ0J1c2luZXNzQ29udHJvbGxlci9nZXRCdXNpbmVzc0J5SWQnLHRoaXMuJHFzLnN0cmluZ2lmeSh7DQoJCQkJYnVzaW5lc3NJZDp0aGlzLmJ1c2luZXNzSWQNCgkJCX0pKS50aGVuKHJlc3BvbnNlPT57DQoJCQkJdGhpcy5idXNpbmVzcyA9IHJlc3BvbnNlLmRhdGE7DQoJCQl9KS5jYXRjaChlcnJvcj0+ew0KCQkJCWNvbnNvbGUuZXJyb3IoZXJyb3IpOw0KCQkJfSk7DQoJCQkNCgkJCS8v5p+l6K+i5b2T5YmN55So5oi35Zyo6LSt54mp6L2m5Lit55qE5b2T5YmN5ZWG5a626aOf5ZOB5YiX6KGoDQoJCQl0aGlzLiRheGlvcy5wb3N0KCdDYXJ0Q29udHJvbGxlci9saXN0Q2FydCcsdGhpcy4kcXMuc3RyaW5naWZ5KHsNCgkJCQl1c2VySWQ6dGhpcy51c2VyLnVzZXJJZCwNCgkJCQlidXNpbmVzc0lkOnRoaXMuYnVzaW5lc3NJZA0KCQkJfSkpLnRoZW4ocmVzcG9uc2U9PnsNCgkJCQl0aGlzLmNhcnRBcnIgPSByZXNwb25zZS5kYXRhOw0KCQkJfSkuY2F0Y2goZXJyb3I9PnsNCgkJCQljb25zb2xlLmVycm9yKGVycm9yKTsNCgkJCX0pOw0KCQl9LA0KCQljb21wdXRlZDp7DQoJCQl0b3RhbFByaWNlKCl7DQoJCQkJbGV0IHRvdGFsUHJpY2UgPSAwOw0KCQkJCWZvcihsZXQgY2FydEl0ZW0gb2YgdGhpcy5jYXJ0QXJyKXsNCgkJCQkJdG90YWxQcmljZSArPSBjYXJ0SXRlbS5mb29kLmZvb2RQcmljZSpjYXJ0SXRlbS5xdWFudGl0eTsNCgkJCQl9DQoJCQkJdG90YWxQcmljZSArPSB0aGlzLmJ1c2luZXNzLmRlbGl2ZXJ5UHJpY2U7DQoJCQkJcmV0dXJuIHRvdGFsUHJpY2U7DQoJCQl9DQoJCX0sDQoJCWZpbHRlcnM6ew0KCQkJc2V4RmlsdGVyKHZhbHVlKXsNCgkJCQlyZXR1cm4gdmFsdWU9PTE/J+WFiOeUnyc6J+Wls+Wjqyc7DQoJCQl9DQoJCX0sDQoJCW1ldGhvZHM6ew0KCQkJdG9Vc2VyQWRkcmVzcygpew0KCQkJCXRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvdXNlckFkZHJlc3MnLHF1ZXJ5OntidXNpbmVzc0lkOnRoaXMuYnVzaW5lc3NJZH19KTsNCgkJCX0sDQoJCQl0b1BheW1lbnQoKXsNCgkJCQlpZih0aGlzLmRlbGl2ZXJ5YWRkcmVzcz09bnVsbCl7DQoJCQkJCWFsZXJ0KCfor7fpgInmi6npgIHotKflnLDlnYDvvIEnKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCQkNCgkJCQkvL+WIm+W7uuiuouWNlQ0KCQkJCXRoaXMuJGF4aW9zLnBvc3QoJ09yZGVyc0NvbnRyb2xsZXIvY3JlYXRlT3JkZXJzJyx0aGlzLiRxcy5zdHJpbmdpZnkoew0KCQkJCQl1c2VySWQ6dGhpcy51c2VyLnVzZXJJZCwNCgkJCQkJYnVzaW5lc3NJZDp0aGlzLmJ1c2luZXNzSWQsDQoJCQkJCWRhSWQ6dGhpcy5kZWxpdmVyeWFkZHJlc3MuZGFJZCwNCgkJCQkJb3JkZXJUb3RhbDp0aGlzLnRvdGFsUHJpY2UNCgkJCQl9KSkudGhlbihyZXNwb25zZT0+ew0KCQkJCQlsZXQgb3JkZXJJZCA9IHJlc3BvbnNlLmRhdGE7DQoJCQkJCWlmKG9yZGVySWQ+MCl7DQoJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDonL3BheW1lbnQnLHF1ZXJ5OntvcmRlcklkOm9yZGVySWR9fSk7DQoJCQkJCX1lbHNlew0KCQkJCQkJYWxlcnQoJ+WIm+W7uuiuouWNleWksei0pe+8gScpOw0KCQkJCQl9DQoJCQkJfSkuY2F0Y2goZXJyb3I9PnsNCgkJCQkJY29uc29sZS5lcnJvcihlcnJvcik7DQoJCQkJfSk7DQoJCQl9DQoJCX0NCgl9DQo="},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Orders.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\r\n\t\t<!-- header部分 -->\r\n\t\t<header>\r\n\t\t\t<p>确认订单</p>\r\n\t\t</header>\r\n\r\n\t\t<!-- 订单信息部分 -->\r\n\t\t<div class=\"order-info\">\r\n\t\t\t<h5>订单配送至：</h5>\r\n\t\t\t<div class=\"order-info-address\" @click=\"toUserAddress\">\r\n\t\t\t\t<p>{{deliveryaddress!=null?deliveryaddress.address:'请选择送货地址'}}</p>\r\n\t\t\t\t<i class=\"fa fa-angle-right\"></i>\r\n\t\t\t</div>\r\n\t\t\t<p>{{user.userName}}{{user.userSex | sexFilter}} {{user.userId}}</p>\r\n\t\t</div>\r\n\r\n\t\t<h3>{{business.businessName}}</h3>\r\n\r\n\t\t<!-- 订单明细部分 -->\r\n\t\t<ul class=\"order-detailed\">\r\n\t\t\t<li v-for=\"item in cartArr\">\r\n\t\t\t\t<div class=\"order-detailed-left\">\r\n\t\t\t\t\t<img :src=\"item.food.foodImg\">\r\n\t\t\t\t\t<p>{{item.food.foodName}} x {{item.quantity}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>&#165;{{item.food.foodPrice*item.quantity}}</p>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class=\"order-deliveryfee\">\r\n\t\t\t<p>配送费</p>\r\n\t\t\t<p>&#165;{{business.deliveryPrice}}</p>\r\n\t\t</div>\r\n\r\n\t\t<!-- 合计部分 -->\r\n\t\t<div class=\"total\">\r\n\t\t\t<div class=\"total-left\">\r\n\t\t\t\t&#165;{{totalPrice}}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"total-right\" @click=\"toPayment\">\r\n\t\t\t\t去支付\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tname:'Orders',\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tbusinessId:this.$route.query.businessId,\r\n\t\t\t\tbusiness:{},\r\n\t\t\t\tuser:{},\r\n\t\t\t\tcartArr:[],\r\n\t\t\t\tdeliveryaddress:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.user = this.$getSessionStorage('user');\r\n\t\t\tthis.deliveryaddress = this.$getLocalStorage(this.user.userId);\r\n\t\t\t\r\n\t\t\t//查询当前商家\r\n\t\t\tthis.$axios.post('BusinessController/getBusinessById',this.$qs.stringify({\r\n\t\t\t\tbusinessId:this.businessId\r\n\t\t\t})).then(response=>{\r\n\t\t\t\tthis.business = response.data;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//查询当前用户在购物车中的当前商家食品列表\r\n\t\t\tthis.$axios.post('CartController/listCart',this.$qs.stringify({\r\n\t\t\t\tuserId:this.user.userId,\r\n\t\t\t\tbusinessId:this.businessId\r\n\t\t\t})).then(response=>{\r\n\t\t\t\tthis.cartArr = response.data;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\ttotalPrice(){\r\n\t\t\t\tlet totalPrice = 0;\r\n\t\t\t\tfor(let cartItem of this.cartArr){\r\n\t\t\t\t\ttotalPrice += cartItem.food.foodPrice*cartItem.quantity;\r\n\t\t\t\t}\r\n\t\t\t\ttotalPrice += this.business.deliveryPrice;\r\n\t\t\t\treturn totalPrice;\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tsexFilter(value){\r\n\t\t\t\treturn value==1?'先生':'女士';\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoUserAddress(){\r\n\t\t\t\tthis.$router.push({path:'/userAddress',query:{businessId:this.businessId}});\r\n\t\t\t},\r\n\t\t\ttoPayment(){\r\n\t\t\t\tif(this.deliveryaddress==null){\r\n\t\t\t\t\talert('请选择送货地址！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//创建订单\r\n\t\t\t\tthis.$axios.post('OrdersController/createOrders',this.$qs.stringify({\r\n\t\t\t\t\tuserId:this.user.userId,\r\n\t\t\t\t\tbusinessId:this.businessId,\r\n\t\t\t\t\tdaId:this.deliveryaddress.daId,\r\n\t\t\t\t\torderTotal:this.totalPrice\r\n\t\t\t\t})).then(response=>{\r\n\t\t\t\t\tlet orderId = response.data;\r\n\t\t\t\t\tif(orderId>0){\r\n\t\t\t\t\t\tthis.$router.push({path:'/payment',query:{orderId:orderId}});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('创建订单失败！');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 订单信息部分 ******************/\r\n\t.wrapper .order-info {\r\n\t\t/*注意这里，不设置高，靠内容撑开。因为地址有可能折行*/\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 12vw;\r\n\t\tbackground-color: #0097EF;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 2vw;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.wrapper .order-info h5 {\r\n\t\tfont-size: 3vw;\r\n\t\tfont-weight: 300;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t\tmargin: 1vw 0;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address p {\r\n\t\twidth: 90%;\r\n\t\tfont-size: 5vw;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address i {\r\n\t\tfont-size: 6vw;\r\n\t}\r\n\r\n\t.wrapper .order-info p {\r\n\t\tfont-size: 3vw;\r\n\t}\r\n\r\n\t.wrapper h3 {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\t\tborder-bottom: solid 1px #DDD;\r\n\t}\r\n\r\n\t/****************** 订单明细部分 ******************/\r\n\t.wrapper .order-detailed {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li {\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left img {\r\n\t\twidth: 10vw;\r\n\t\theight: 10vw;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left p {\r\n\t\tfont-size: 3.5vw;\r\n\t\tmargin-left: 3vw;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li p {\r\n\t\tfont-size: 3.5vw;\r\n\t}\r\n\r\n\t.wrapper .order-deliveryfee {\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 3.5vw;\r\n\t}\r\n\r\n\t/****************** 订单合计部分 ******************/\r\n\t.wrapper .total {\r\n\t\twidth: 100%;\r\n\t\theight: 14vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.wrapper .total .total-left {\r\n\t\tflex: 2;\r\n\t\tbackground-color: #505051;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .total .total-right {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #38CA73;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n"]}]}