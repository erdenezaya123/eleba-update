{"remainingRequest":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\thread-loader@2.1.3\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\src\\views\\Orders.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\src\\views\\Orders.vue","mtime":1725332322499},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\babel.config.js","mtime":1725332320241},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\thread-loader@2.1.3\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\hbuider\\HBuilderX\\data\\elmclient\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3JkZXJzJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnVzaW5lc3NJZDogdGhpcy4kcm91dGUucXVlcnkuYnVzaW5lc3NJZCwKICAgICAgYnVzaW5lc3M6IHt9LAogICAgICB1c2VyOiB7fSwKICAgICAgY2FydEFycjogW10sCiAgICAgIGRlbGl2ZXJ5YWRkcmVzczoge30KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy51c2VyID0gdGhpcy4kZ2V0U2Vzc2lvblN0b3JhZ2UoJ3VzZXInKTsKICAgIHRoaXMuZGVsaXZlcnlhZGRyZXNzID0gdGhpcy4kZ2V0TG9jYWxTdG9yYWdlKHRoaXMudXNlci51c2VySWQpOwoKICAgIC8v5p+l6K+i5b2T5YmN5ZWG5a62CiAgICB0aGlzLiRheGlvcy5wb3N0KCdCdXNpbmVzc0NvbnRyb2xsZXIvZ2V0QnVzaW5lc3NCeUlkJywgdGhpcy4kcXMuc3RyaW5naWZ5KHsKICAgICAgYnVzaW5lc3NJZDogdGhpcy5idXNpbmVzc0lkCiAgICB9KSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuYnVzaW5lc3MgPSByZXNwb25zZS5kYXRhOwogICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgIH0pOwoKICAgIC8v5p+l6K+i5b2T5YmN55So5oi35Zyo6LSt54mp6L2m5Lit55qE5b2T5YmN5ZWG5a626aOf5ZOB5YiX6KGoCiAgICB0aGlzLiRheGlvcy5wb3N0KCdDYXJ0Q29udHJvbGxlci9saXN0Q2FydCcsIHRoaXMuJHFzLnN0cmluZ2lmeSh7CiAgICAgIHVzZXJJZDogdGhpcy51c2VyLnVzZXJJZCwKICAgICAgYnVzaW5lc3NJZDogdGhpcy5idXNpbmVzc0lkCiAgICB9KSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuY2FydEFyciA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgfSk7CiAgfSwKICBjb21wdXRlZDogewogICAgdG90YWxQcmljZSgpIHsKICAgICAgbGV0IHRvdGFsUHJpY2UgPSAwOwogICAgICBmb3IgKGxldCBjYXJ0SXRlbSBvZiB0aGlzLmNhcnRBcnIpIHsKICAgICAgICB0b3RhbFByaWNlICs9IGNhcnRJdGVtLmZvb2QuZm9vZFByaWNlICogY2FydEl0ZW0ucXVhbnRpdHk7CiAgICAgIH0KICAgICAgdG90YWxQcmljZSArPSB0aGlzLmJ1c2luZXNzLmRlbGl2ZXJ5UHJpY2U7CiAgICAgIHJldHVybiB0b3RhbFByaWNlOwogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgc2V4RmlsdGVyKHZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZSA9PSAxID8gJ+WFiOeUnycgOiAn5aWz5aOrJzsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvVXNlckFkZHJlc3MoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3VzZXJBZGRyZXNzJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgYnVzaW5lc3NJZDogdGhpcy5idXNpbmVzc0lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0b1BheW1lbnQoKSB7CiAgICAgIGlmICh0aGlzLmRlbGl2ZXJ5YWRkcmVzcyA9PSBudWxsKSB7CiAgICAgICAgYWxlcnQoJ+ivt+mAieaLqemAgei0p+WcsOWdgO+8gScpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy/liJvlu7rorqLljZUKICAgICAgdGhpcy4kYXhpb3MucG9zdCgnT3JkZXJzQ29udHJvbGxlci9jcmVhdGVPcmRlcnMnLCB0aGlzLiRxcy5zdHJpbmdpZnkoewogICAgICAgIHVzZXJJZDogdGhpcy51c2VyLnVzZXJJZCwKICAgICAgICBidXNpbmVzc0lkOiB0aGlzLmJ1c2luZXNzSWQsCiAgICAgICAgZGFJZDogdGhpcy5kZWxpdmVyeWFkZHJlc3MuZGFJZCwKICAgICAgICBvcmRlclRvdGFsOiB0aGlzLnRvdGFsUHJpY2UKICAgICAgfSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGxldCBvcmRlcklkID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBpZiAob3JkZXJJZCA+IDApIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9wYXltZW50JywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBvcmRlcklkOiBvcmRlcklkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgn5Yib5bu66K6i5Y2V5aSx6LSl77yBJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["name","data","businessId","$route","query","business","user","cartArr","deliveryaddress","created","$getSessionStorage","$getLocalStorage","userId","$axios","post","$qs","stringify","then","response","catch","error","console","computed","totalPrice","cartItem","food","foodPrice","quantity","deliveryPrice","filters","sexFilter","value","methods","toUserAddress","$router","push","path","toPayment","alert","daId","orderTotal","orderId"],"sources":["src/views/Orders.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wrapper\">\r\n\r\n\t\t<!-- header部分 -->\r\n\t\t<header>\r\n\t\t\t<p>确认订单</p>\r\n\t\t</header>\r\n\r\n\t\t<!-- 订单信息部分 -->\r\n\t\t<div class=\"order-info\">\r\n\t\t\t<h5>订单配送至：</h5>\r\n\t\t\t<div class=\"order-info-address\" @click=\"toUserAddress\">\r\n\t\t\t\t<p>{{deliveryaddress!=null?deliveryaddress.address:'请选择送货地址'}}</p>\r\n\t\t\t\t<i class=\"fa fa-angle-right\"></i>\r\n\t\t\t</div>\r\n\t\t\t<p>{{user.userName}}{{user.userSex | sexFilter}} {{user.userId}}</p>\r\n\t\t</div>\r\n\r\n\t\t<h3>{{business.businessName}}</h3>\r\n\r\n\t\t<!-- 订单明细部分 -->\r\n\t\t<ul class=\"order-detailed\">\r\n\t\t\t<li v-for=\"item in cartArr\">\r\n\t\t\t\t<div class=\"order-detailed-left\">\r\n\t\t\t\t\t<img :src=\"item.food.foodImg\">\r\n\t\t\t\t\t<p>{{item.food.foodName}} x {{item.quantity}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>&#165;{{item.food.foodPrice*item.quantity}}</p>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class=\"order-deliveryfee\">\r\n\t\t\t<p>配送费</p>\r\n\t\t\t<p>&#165;{{business.deliveryPrice}}</p>\r\n\t\t</div>\r\n\r\n\t\t<!-- 合计部分 -->\r\n\t\t<div class=\"total\">\r\n\t\t\t<div class=\"total-left\">\r\n\t\t\t\t&#165;{{totalPrice}}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"total-right\" @click=\"toPayment\">\r\n\t\t\t\t去支付\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tname:'Orders',\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tbusinessId:this.$route.query.businessId,\r\n\t\t\t\tbusiness:{},\r\n\t\t\t\tuser:{},\r\n\t\t\t\tcartArr:[],\r\n\t\t\t\tdeliveryaddress:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.user = this.$getSessionStorage('user');\r\n\t\t\tthis.deliveryaddress = this.$getLocalStorage(this.user.userId);\r\n\t\t\t\r\n\t\t\t//查询当前商家\r\n\t\t\tthis.$axios.post('BusinessController/getBusinessById',this.$qs.stringify({\r\n\t\t\t\tbusinessId:this.businessId\r\n\t\t\t})).then(response=>{\r\n\t\t\t\tthis.business = response.data;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//查询当前用户在购物车中的当前商家食品列表\r\n\t\t\tthis.$axios.post('CartController/listCart',this.$qs.stringify({\r\n\t\t\t\tuserId:this.user.userId,\r\n\t\t\t\tbusinessId:this.businessId\r\n\t\t\t})).then(response=>{\r\n\t\t\t\tthis.cartArr = response.data;\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\ttotalPrice(){\r\n\t\t\t\tlet totalPrice = 0;\r\n\t\t\t\tfor(let cartItem of this.cartArr){\r\n\t\t\t\t\ttotalPrice += cartItem.food.foodPrice*cartItem.quantity;\r\n\t\t\t\t}\r\n\t\t\t\ttotalPrice += this.business.deliveryPrice;\r\n\t\t\t\treturn totalPrice;\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tsexFilter(value){\r\n\t\t\t\treturn value==1?'先生':'女士';\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoUserAddress(){\r\n\t\t\t\tthis.$router.push({path:'/userAddress',query:{businessId:this.businessId}});\r\n\t\t\t},\r\n\t\t\ttoPayment(){\r\n\t\t\t\tif(this.deliveryaddress==null){\r\n\t\t\t\t\talert('请选择送货地址！');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//创建订单\r\n\t\t\t\tthis.$axios.post('OrdersController/createOrders',this.$qs.stringify({\r\n\t\t\t\t\tuserId:this.user.userId,\r\n\t\t\t\t\tbusinessId:this.businessId,\r\n\t\t\t\t\tdaId:this.deliveryaddress.daId,\r\n\t\t\t\t\torderTotal:this.totalPrice\r\n\t\t\t\t})).then(response=>{\r\n\t\t\t\t\tlet orderId = response.data;\r\n\t\t\t\t\tif(orderId>0){\r\n\t\t\t\t\t\tthis.$router.push({path:'/payment',query:{orderId:orderId}});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('创建订单失败！');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/****************** 总容器 ******************/\r\n\t.wrapper {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/****************** header部分 ******************/\r\n\t.wrapper header {\r\n\t\twidth: 100%;\r\n\t\theight: 12vw;\r\n\t\tbackground-color: #0097FF;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.8vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 1000;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/****************** 订单信息部分 ******************/\r\n\t.wrapper .order-info {\r\n\t\t/*注意这里，不设置高，靠内容撑开。因为地址有可能折行*/\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 12vw;\r\n\t\tbackground-color: #0097EF;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 2vw;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.wrapper .order-info h5 {\r\n\t\tfont-size: 3vw;\r\n\t\tfont-weight: 300;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t\tmargin: 1vw 0;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address p {\r\n\t\twidth: 90%;\r\n\t\tfont-size: 5vw;\r\n\t}\r\n\r\n\t.wrapper .order-info .order-info-address i {\r\n\t\tfont-size: 6vw;\r\n\t}\r\n\r\n\t.wrapper .order-info p {\r\n\t\tfont-size: 3vw;\r\n\t}\r\n\r\n\t.wrapper h3 {\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tfont-size: 4vw;\r\n\t\tcolor: #666;\r\n\t\tborder-bottom: solid 1px #DDD;\r\n\t}\r\n\r\n\t/****************** 订单明细部分 ******************/\r\n\t.wrapper .order-detailed {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li {\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left img {\r\n\t\twidth: 10vw;\r\n\t\theight: 10vw;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li .order-detailed-left p {\r\n\t\tfont-size: 3.5vw;\r\n\t\tmargin-left: 3vw;\r\n\t}\r\n\r\n\t.wrapper .order-detailed li p {\r\n\t\tfont-size: 3.5vw;\r\n\t}\r\n\r\n\t.wrapper .order-deliveryfee {\r\n\t\twidth: 100%;\r\n\t\theight: 16vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 3vw;\r\n\t\tcolor: #666;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 3.5vw;\r\n\t}\r\n\r\n\t/****************** 订单合计部分 ******************/\r\n\t.wrapper .total {\r\n\t\twidth: 100%;\r\n\t\theight: 14vw;\r\n\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.wrapper .total .total-left {\r\n\t\tflex: 2;\r\n\t\tbackground-color: #505051;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.wrapper .total .total-right {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #38CA73;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 4.5vw;\r\n\t\tfont-weight: 700;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n"],"mappings":";AAgDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,UAAA;MACAG,QAAA;MACAC,IAAA;MACAC,OAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAH,IAAA,QAAAI,kBAAA;IACA,KAAAF,eAAA,QAAAG,gBAAA,MAAAL,IAAA,CAAAM,MAAA;;IAEA;IACA,KAAAC,MAAA,CAAAC,IAAA,4CAAAC,GAAA,CAAAC,SAAA;MACAd,UAAA,OAAAA;IACA,IAAAe,IAAA,CAAAC,QAAA;MACA,KAAAb,QAAA,GAAAa,QAAA,CAAAjB,IAAA;IACA,GAAAkB,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;IACA;;IAEA;IACA,KAAAP,MAAA,CAAAC,IAAA,iCAAAC,GAAA,CAAAC,SAAA;MACAJ,MAAA,OAAAN,IAAA,CAAAM,MAAA;MACAV,UAAA,OAAAA;IACA,IAAAe,IAAA,CAAAC,QAAA;MACA,KAAAX,OAAA,GAAAW,QAAA,CAAAjB,IAAA;IACA,GAAAkB,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;IACA;EACA;EACAE,QAAA;IACAC,WAAA;MACA,IAAAA,UAAA;MACA,SAAAC,QAAA,SAAAjB,OAAA;QACAgB,UAAA,IAAAC,QAAA,CAAAC,IAAA,CAAAC,SAAA,GAAAF,QAAA,CAAAG,QAAA;MACA;MACAJ,UAAA,SAAAlB,QAAA,CAAAuB,aAAA;MACA,OAAAL,UAAA;IACA;EACA;EACAM,OAAA;IACAC,UAAAC,KAAA;MACA,OAAAA,KAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;QAAAhC,KAAA;UAAAF,UAAA,OAAAA;QAAA;MAAA;IACA;IACAmC,UAAA;MACA,SAAA7B,eAAA;QACA8B,KAAA;QACA;MACA;;MAEA;MACA,KAAAzB,MAAA,CAAAC,IAAA,uCAAAC,GAAA,CAAAC,SAAA;QACAJ,MAAA,OAAAN,IAAA,CAAAM,MAAA;QACAV,UAAA,OAAAA,UAAA;QACAqC,IAAA,OAAA/B,eAAA,CAAA+B,IAAA;QACAC,UAAA,OAAAjB;MACA,IAAAN,IAAA,CAAAC,QAAA;QACA,IAAAuB,OAAA,GAAAvB,QAAA,CAAAjB,IAAA;QACA,IAAAwC,OAAA;UACA,KAAAP,OAAA,CAAAC,IAAA;YAAAC,IAAA;YAAAhC,KAAA;cAAAqC,OAAA,EAAAA;YAAA;UAAA;QACA;UACAH,KAAA;QACA;MACA,GAAAnB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}